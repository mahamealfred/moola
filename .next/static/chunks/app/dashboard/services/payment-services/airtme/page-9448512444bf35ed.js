(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7713],{35695:(e,t,r)=>{"use strict";var s=r(18999);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},91541:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>c,Z:()=>i});var s=r(95155),a=r(12115),n=r(35695);let u=(0,a.createContext)(void 0);class o{encrypt(e){try{return btoa(encodeURIComponent(e))}catch(e){throw Error("Encryption failed")}}decrypt(e){try{return decodeURIComponent(atob(e))}catch(e){throw this.clearUserData(),Error("Invalid token data")}}setUserData(e){try{let t={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+36e5},r=this.encrypt(JSON.stringify(t));sessionStorage.setItem(this.ACCESS_TOKEN_KEY,r);let{accessToken:s,refreshToken:a,...n}=e,u=this.encrypt(JSON.stringify(n));sessionStorage.setItem(this.USER_DATA_KEY,u)}catch(e){this.clearUserData()}}getUserData(){try{let e=sessionStorage.getItem(this.USER_DATA_KEY);if(!e)return null;return JSON.parse(this.decrypt(e))}catch(e){return this.clearUserData(),null}}getAccessToken(){try{let e=sessionStorage.getItem(this.ACCESS_TOKEN_KEY);if(!e)return null;let t=JSON.parse(this.decrypt(e));if(Date.now()>t.expiresAt)return this.clearUserData(),null;return t.accessToken}catch(e){return this.clearUserData(),null}}clearUserData(){sessionStorage.removeItem(this.ACCESS_TOKEN_KEY),sessionStorage.removeItem(this.USER_DATA_KEY)}isAuthenticated(){return!!this.getAccessToken()}constructor(){this.ACCESS_TOKEN_KEY="at",this.USER_DATA_KEY="ud"}}let i=new o;function c(e){let{children:t}=e,[r,o]=(0,a.useState)(null),[c,l]=(0,a.useState)(!0),h=(0,n.useRouter)();(0,a.useEffect)(()=>{setTimeout(()=>{try{let e=i.getUserData();i.isAuthenticated()&&e?o(e):(i.clearUserData(),o(null))}catch(e){i.clearUserData(),o(null)}finally{l(!1)}},100)},[]);let E={user:r,isLoading:c,isAuthenticated:!!r&&i.isAuthenticated(),login:e=>{i.setUserData(e),o(e)},logout:()=>{i.clearUserData(),o(null),h.push("/login")}};return(0,s.jsx)(u.Provider,{value:E,children:t})}function l(){let e=(0,a.useContext)(u);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},97057:(e,t,r)=>{Promise.resolve().then(r.bind(r,61247))}},e=>{var t=t=>e(e.s=t);e.O(0,[9553,5430,5003,1247,8441,1317,7358],()=>t(97057)),_N_E=e.O()}]);
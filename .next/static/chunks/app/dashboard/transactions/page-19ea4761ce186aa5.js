(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2563],{45975:(e,t,s)=>{Promise.resolve().then(s.bind(s,51188))},51188:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>b});var a=s(95155),r=s(12115),i=s(11032),n=s(36268),l=s(55430),o=s(8076),d=s(26597),c=s(76118),x=s(10351);function m(e){let{status:t}=e;return(0,a.jsx)("span",{className:"text-xs font-medium px-2.5 py-1 rounded-full border ".concat({Completed:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800",Pending:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-800",Failed:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800"}[t]||"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-700"),children:t})}var g=s(91541);let h=(e,t,s)=>{let a=s.toLowerCase();return[e.original.id.toLowerCase(),e.original.date.toLowerCase(),e.original.formattedDate.toLowerCase(),e.original.status.toLowerCase(),e.original.description.toLowerCase(),e.original.serviceName.toLowerCase(),e.original.amount.toString(),e.original.token?e.original.token.toLowerCase():""].some(e=>e.includes(a))},u=e=>{let{transaction:t,onView:s,onPrint:i}=e,[n,o]=(0,r.useState)(!1);return(0,a.jsxs)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-900 rounded-lg border border-gray-200 dark:border-gray-700 p-4 mb-3 shadow-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsxs)("span",{className:"font-mono text-xs text-gray-500 dark:text-gray-400",children:["ID: ",t.id]}),(0,a.jsx)(m,{status:t.status})]}),(0,a.jsx)("h3",{className:"font-medium text-gray-800 dark:text-white text-sm capitalize",children:t.serviceName}),(0,a.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:t.formattedDate})]}),(0,a.jsx)("button",{onClick:()=>o(!n),className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:n?(0,a.jsx)(x.wAb,{className:"w-4 h-4 text-gray-500"}):(0,a.jsx)(x.fK4,{className:"w-4 h-4 text-gray-500"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Amount:"}),(0,a.jsxs)("p",{className:"font-medium text-gray-800 dark:text-white",children:["RWF ",t.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.token&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Token:"}),(0,a.jsx)("p",{className:"font-mono text-xs text-gray-800 dark:text-white truncate",children:t.token})]})]}),n&&(0,a.jsxs)(l.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"border-t border-gray-200 dark:border-gray-700 pt-3 mt-3",children:[(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Description:"}),(0,a.jsx)("p",{className:"text-gray-800 dark:text-white text-xs leading-relaxed",children:t.description})]}),t.processDate&&(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-500 dark:text-gray-400 text-xs",children:"Processed:"}),(0,a.jsx)("p",{className:"text-gray-800 dark:text-white text-xs",children:t.formattedProcessDate})]})]}),(0,a.jsxs)("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>s(t),className:"flex-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 py-2 px-3 rounded-lg text-xs font-medium hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors flex items-center justify-center gap-1",children:[(0,a.jsx)(x.Vap,{className:"w-3 h-3"}),"View"]}),(0,a.jsxs)("button",{onClick:()=>i(t),className:"flex-1 bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400 py-2 px-3 rounded-lg text-xs font-medium hover:bg-orange-100 dark:hover:bg-orange-900/30 transition-colors flex items-center justify-center gap-1",children:[(0,a.jsx)(x.Mvz,{className:"w-3 h-3"}),"Print"]})]})]}),!n&&(0,a.jsxs)("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("button",{onClick:()=>s(t),className:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-xs flex items-center gap-1",children:[(0,a.jsx)(x.Vap,{className:"w-3 h-3"}),"View"]}),(0,a.jsxs)("button",{onClick:()=>i(t),className:"text-orange-600 dark:text-orange-400 hover:text-orange-800 dark:hover:text-orange-300 text-xs flex items-center gap-1",children:[(0,a.jsx)(x.Mvz,{className:"w-3 h-3"}),"Print"]})]})]})},y=e=>{let t=new d.Ay;t.setFontSize(16),t.text("Transaction Receipt - ".concat(e.id),20,20),(0,c.Ay)(t,{startY:30,head:[["Field","Value"]],body:[["Transaction ID",e.id],["Date",e.formattedDate],["Service",e.serviceName],["Status",e.status],["Amount","RWF ".concat(e.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}))],["Token",e.token||"N/A"],["Description",e.description]],theme:"grid",headStyles:{fillColor:[255,102,0],textColor:255}}),t.save("Receipt_".concat(e.id,".pdf"))},p=e=>{let{transaction:t,isOpen:s,onClose:r}=e;return s&&t?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50 backdrop-blur-sm",children:(0,a.jsxs)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 sm:p-6 border-b border-gray-200 dark:border-gray-700",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:"Transaction Details"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["ID: ",t.id]})]}),(0,a.jsx)("button",{onClick:r,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:(0,a.jsx)(x.yGN,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"})})]}),(0,a.jsx)("div",{className:"p-4 sm:p-6 overflow-y-auto max-h-[calc(90vh-140px)]",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-white border-b pb-2",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Transaction ID"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-800 dark:text-white font-mono",children:t.id})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Date & Time"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-800 dark:text-white",children:t.formattedDate}),t.processDate&&(0,a.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Processed: ",t.formattedProcessDate]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Service"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-800 dark:text-white capitalize",children:t.serviceName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Status"}),(0,a.jsx)("div",{className:"mt-1",children:(0,a.jsx)(m,{status:t.status})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-white border-b pb-2",children:"Financial Details"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Amount"}),(0,a.jsxs)("p",{className:"text-sm sm:text-lg font-bold text-gray-800 dark:text-white",children:["RWF ",t.amount.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.customerCharge>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Customer Charge"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-800 dark:text-white",children:["RWF ",t.customerCharge.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),t.token&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-xs sm:text-sm font-medium text-gray-500 dark:text-gray-400",children:"Token"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-800 dark:text-white font-mono break-all",children:t.token})]})]})]}),(0,a.jsxs)("div",{className:"md:col-span-2 space-y-4",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 dark:text-white border-b pb-2",children:"Description"}),(0,a.jsx)("p",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 leading-relaxed",children:t.description})]})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-end gap-2 sm:gap-3 p-4 sm:p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800",children:[(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 text-xs sm:text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors order-2 sm:order-1",children:"Close"}),(0,a.jsxs)("button",{onClick:()=>{y(t),r()},className:"px-4 py-2 text-xs sm:text-sm font-medium text-white bg-[#ff6600] rounded-lg hover:bg-[#e65c00] transition-colors flex items-center justify-center gap-2 order-1 sm:order-2",children:[(0,a.jsx)(x.Mvz,{className:"w-4 h-4"}),"Print Receipt"]})]})]})}):null};function b(){let[e,t]=(0,r.useState)(""),[s,d]=(0,r.useState)([]),[c,b]=(0,r.useState)(!0),[f,j]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),[N,v]=(0,r.useState)(null),[S,C]=(0,r.useState)(!1),[D,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=()=>{A(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let E=e=>{v(e),C(!0)},T=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?k(!0):b(!0),j("");try{let e=g.Z.getAccessToken();if(!e)throw Error("Authentication required. Please login again.");let t=null,s=null;for(let a of["https://core-api.ddin.rw/v1/agency/thirdpartyagency/services/transactions/history","https://core-api.ddin.rw/v1/agency/thirdpartyagency/transactions/history","https://core-api.ddin.rw/v1/agency/transactions/history","https://core-api.ddin.rw/v1/transactions/history"])try{if(console.log("Trying endpoint: ".concat(a)),(t=await fetch(a,{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})).ok){let e=await t.json();if(e.success)return void d(e.data||[]);s=Error(e.message||"Failed to fetch transactions")}else if(404!==t.status)throw Error("HTTP error! status: ".concat(t.status))}catch(e){s=e}throw s||Error("All endpoints failed. Please check the API URL.")}catch(e){j(e.message||"Failed to fetch transactions"),console.error("Error fetching transactions:",e)}finally{b(!1),k(!1)}};(0,r.useEffect)(()=>{T()},[]);let P=(0,i.FB)(),R=[P.accessor("id",{header:"Tx ID",cell:e=>(0,a.jsx)("span",{className:"font-mono text-xs sm:text-sm",children:e.getValue()}),size:100}),P.accessor("formattedDate",{header:"Date",cell:e=>(0,a.jsx)("span",{className:"whitespace-nowrap text-xs sm:text-sm",children:e.getValue()}),size:110}),P.accessor("serviceName",{header:"Service",cell:e=>(0,a.jsx)("span",{className:"truncate block text-xs sm:text-sm capitalize",children:e.getValue()}),size:120}),P.accessor("status",{header:"Status",cell:e=>(0,a.jsx)(m,{status:e.getValue()}),size:100}),P.accessor("amount",{header:"Amount (RWF)",cell:e=>(0,a.jsx)("span",{className:"font-medium whitespace-nowrap text-xs sm:text-sm",children:e.getValue().toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})}),size:120}),P.accessor("token",{header:"Token",cell:e=>(0,a.jsx)("span",{className:"font-mono text-xs sm:text-sm truncate block",children:e.getValue()||"N/A"}),size:120}),P.accessor("description",{header:"Description",cell:e=>(0,a.jsx)("span",{className:"truncate block text-xs sm:text-sm",children:e.getValue()}),size:150}),P.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>E(t.original),className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 flex items-center gap-1 text-xs sm:text-sm",title:"View Details",children:[(0,a.jsx)(x.Vap,{className:"text-xs sm:text-sm"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"View"})]}),(0,a.jsxs)("button",{onClick:()=>y(t.original),className:"text-[#ff6600] hover:text-[#e65c00] flex items-center gap-1 text-xs sm:text-sm",title:"Print Receipt",children:[(0,a.jsx)(x.Mvz,{className:"text-xs sm:text-sm"}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Print"})]})]})},size:120})],F=(0,n.N4)({data:s,columns:R,state:{globalFilter:e,pagination:{pageSize:8,pageIndex:0}},onGlobalFilterChange:t,globalFilterFn:h,getCoreRowModel:(0,i.HT)(),getFilteredRowModel:(0,i.hM)(),getPaginationRowModel:(0,i.kW)()});return c?(0,a.jsx)("div",{className:"p-3 sm:p-4 md:p-6 bg-white dark:bg-gray-950 transition-colors w-full max-w-full overflow-x-hidden min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(x.jTZ,{className:"w-8 h-8 animate-spin text-[#ff6600] mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading transactions..."})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"p-3 sm:p-4 md:p-6 bg-white dark:bg-gray-950 transition-colors w-full max-w-full overflow-x-hidden",children:[(0,a.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white",children:"Transaction History"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 dark:text-gray-400",children:"View and manage your payment transactions"}),f&&(0,a.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,a.jsxs)("p",{className:"text-yellow-700 dark:text-yellow-300 text-xs",children:[f," - Showing sample data for demonstration"]})})]}),(0,a.jsxs)("button",{onClick:()=>{T(!0)},disabled:w,className:"flex items-center gap-2 px-4 py-2 bg-[#13294b] dark:bg-[#ff6600] text-white rounded-xl hover:bg-[#0f213d] dark:hover:bg-[#e65c00] transition-colors disabled:opacity-50 text-sm",children:[(0,a.jsx)(x.jTZ,{className:"w-4 h-4 ".concat(w?"animate-spin":"")}),w?"Refreshing...":"Refresh"]})]})}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-3",children:[(0,a.jsxs)("div",{className:"relative w-full sm:max-w-md",children:[(0,a.jsx)(x.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm"}),(0,a.jsx)("input",{value:e,onChange:e=>t(e.target.value),placeholder:"Search transactions...",className:"border rounded-lg sm:rounded-xl pl-9 pr-4 py-2 w-full focus:outline-none focus:ring-2 focus:ring-[#ff6600] dark:bg-gray-800 dark:text-white dark:border-gray-700 text-sm sm:text-base"})]}),(0,a.jsxs)(o.CSVLink,{data:F.getFilteredRowModel().rows.map(e=>e.original),filename:"transactions.csv",className:"bg-[#ff6600] hover:bg-[#e65c00] text-white px-3 sm:px-5 py-2 rounded-lg sm:rounded-xl transition flex items-center gap-2 text-sm w-full sm:w-auto justify-center",children:[(0,a.jsx)(x.a4x,{className:"text-sm"}),(0,a.jsx)("span",{children:"Export CSV"})]})]}),e&&(0,a.jsxs)("div",{className:"mb-3 text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:[F.getFilteredRowModel().rows.length," transaction(s) found"]}),D?(0,a.jsx)("div",{className:"space-y-3",children:F.getRowModel().rows.length>0?F.getRowModel().rows.map(e=>(0,a.jsx)(u,{transaction:e.original,onView:E,onPrint:y},e.id)):(0,a.jsx)("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:0===s.length?"No transactions found.":"No transactions match your search."})}):(0,a.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"overflow-x-auto bg-white/70 dark:bg-black/40 backdrop-blur-md shadow-lg rounded-xl border border-gray-200 dark:border-gray-700 w-full",children:(0,a.jsxs)("table",{className:"w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,a.jsx)("thead",{className:"bg-gray-100 dark:bg-gray-800",children:F.getHeaderGroups().map(e=>(0,a.jsx)("tr",{children:e.headers.map(e=>(0,a.jsx)("th",{className:"px-2 py-3 text-left text-xs font-medium text-gray-700 dark:text-gray-300 uppercase tracking-wider whitespace-nowrap",style:{width:"".concat(e.getSize(),"px"),minWidth:"".concat(e.getSize(),"px"),maxWidth:"".concat(e.getSize(),"px")},children:(0,n.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,a.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-800",children:F.getRowModel().rows.length>0?F.getRowModel().rows.map(e=>(0,a.jsx)(l.P.tr,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:e.getVisibleCells().map(e=>(0,a.jsx)("td",{className:"px-2 py-3 text-xs sm:text-sm text-gray-800 dark:text-gray-200 whitespace-nowrap",style:{width:"".concat(e.column.getSize(),"px"),minWidth:"".concat(e.column.getSize(),"px"),maxWidth:"".concat(e.column.getSize(),"px")},children:(0,n.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:R.length,className:"px-4 py-6 text-center text-gray-500 dark:text-gray-400 text-sm",children:0===s.length?"No transactions found.":"No transactions match your search."})})})]})}),F.getFilteredRowModel().rows.length>0&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-center mt-4 sm:mt-6 gap-3",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:["Showing ",F.getRowModel().rows.length," of ",F.getFilteredRowModel().rows.length," entries"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>F.previousPage(),disabled:!F.getCanPreviousPage(),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-800 text-sm flex items-center gap-1",title:"Previous page",children:[(0,a.jsx)(x.irw,{className:"text-sm"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Previous"})]}),(0,a.jsxs)("span",{className:"text-xs sm:text-sm text-gray-700 dark:text-gray-300 px-2",children:["Page ",F.getState().pagination.pageIndex+1," of ",F.getPageCount()]}),(0,a.jsxs)("button",{onClick:()=>F.nextPage(),disabled:!F.getCanNextPage(),className:"p-2 border border-gray-300 dark:border-gray-600 rounded-lg disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-800 text-sm flex items-center gap-1",title:"Next page",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,a.jsx)(x.fOo,{className:"text-sm"})]})]})]})]}),(0,a.jsx)(p,{transaction:N,isOpen:S,onClose:()=>{C(!1),v(null)}})]})}},91541:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,AuthProvider:()=>d,Z:()=>o});var a=s(95155),r=s(12115),i=s(35695);let n=(0,r.createContext)(void 0);class l{encrypt(e){try{return btoa(encodeURIComponent(e))}catch(e){throw Error("Encryption failed")}}decrypt(e){try{return decodeURIComponent(atob(e))}catch(e){throw this.clearUserData(),Error("Invalid token data")}}setUserData(e){try{let t={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+36e5},s=this.encrypt(JSON.stringify(t));sessionStorage.setItem(this.ACCESS_TOKEN_KEY,s);let{accessToken:a,refreshToken:r,...i}=e,n=this.encrypt(JSON.stringify(i));sessionStorage.setItem(this.USER_DATA_KEY,n)}catch(e){this.clearUserData()}}getUserData(){try{let e=sessionStorage.getItem(this.USER_DATA_KEY);if(!e)return null;return JSON.parse(this.decrypt(e))}catch(e){return this.clearUserData(),null}}getAccessToken(){try{let e=sessionStorage.getItem(this.ACCESS_TOKEN_KEY);if(!e)return null;let t=JSON.parse(this.decrypt(e));if(Date.now()>t.expiresAt)return this.clearUserData(),null;return t.accessToken}catch(e){return this.clearUserData(),null}}clearUserData(){sessionStorage.removeItem(this.ACCESS_TOKEN_KEY),sessionStorage.removeItem(this.USER_DATA_KEY)}isAuthenticated(){return!!this.getAccessToken()}constructor(){this.ACCESS_TOKEN_KEY="at",this.USER_DATA_KEY="ud"}}let o=new l;function d(e){let{children:t}=e,[s,l]=(0,r.useState)(null),[d,c]=(0,r.useState)(!0),x=(0,i.useRouter)();(0,r.useEffect)(()=>{setTimeout(()=>{try{let e=o.getUserData();o.isAuthenticated()&&e?l(e):(o.clearUserData(),l(null))}catch(e){o.clearUserData(),l(null)}finally{c(!1)}},100)},[]);let m={user:s,isLoading:d,isAuthenticated:!!s&&o.isAuthenticated(),login:e=>{o.setUserData(e),l(e)},logout:()=>{o.clearUserData(),l(null),x.push("/login")}};return(0,a.jsx)(n.Provider,{value:m,children:t})}function c(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[844,3930,5430,1805,8441,1317,7358],()=>t(45975)),_N_E=e.O()}]);
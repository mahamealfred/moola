(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4631],{35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"usePathname")&&t.d(r,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},48163:(e,r,t)=>{Promise.resolve().then(t.bind(t,55149))},55149:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>o});var a=t(95155),s=t(12115),n=t(55430),l=t(10351),i=t(91541);function o(e){let r=null==e?void 0:e.initialAgentInfo,[t,o]=(0,s.useState)("profile"),[d,c]=(0,s.useState)(!0),[g,m]=(0,s.useState)({email:!0,push:!1,sms:!0}),[u,x]=(0,s.useState)(!1),[h,y]=(0,s.useState)(!1),[b,f]=(0,s.useState)(!1),[p,N]=(0,s.useState)(!1),[j,k]=(0,s.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[v,w]=(0,s.useState)({id:"",firstName:"",lastName:"",email:"",phoneNumber:"",agencyName:"",agencyCode:"",status:"",role:"",createdAt:"",lastLogin:""}),[S,P]=(0,s.useState)({firstName:"",lastName:"",email:"",phoneNumber:""});(0,s.useEffect)(()=>{(()=>{try{let t=i.Z.getUserData();if(t){var e;let r=(t.name||"").split(" "),a=r.shift()||"",s=r.join(" ")||"";w({id:null!=(e=t.id)?e:"",firstName:a,lastName:s,email:t.email||"",phoneNumber:t.phoneNumber||"",agencyName:t.agencyName||"",agencyCode:t.agencyCode||"",status:t.status||"active",role:t.category||"agent",createdAt:t.createdAt||"",lastLogin:t.lastLogin||new Date().toISOString()}),P({firstName:a,lastName:s,email:t.email||"",phoneNumber:t.phoneNumber||""})}else r&&(w(r),P({firstName:r.firstName,lastName:r.lastName,email:r.email,phoneNumber:r.phoneNumber}));let a="true"===localStorage.getItem("darkMode");c(a),a&&document.documentElement.classList.add("dark");let s=localStorage.getItem("notificationPreferences");s&&m(JSON.parse(s))}catch(e){console.error("Error loading settings:",e)}})()},[r]),(0,s.useEffect)(()=>{d?(document.documentElement.classList.add("dark"),localStorage.setItem("darkMode","true")):(document.documentElement.classList.remove("dark"),localStorage.setItem("darkMode","false"))},[d]),(0,s.useEffect)(()=>{localStorage.setItem("notificationPreferences",JSON.stringify(g))},[g]);let E=e=>{let{name:r,value:t}=e.target;k(e=>({...e,[r]:t}))},O=e=>{let{name:r,value:t}=e.target;P(e=>({...e,[r]:t}))},C=async()=>{try{let e=i.Z.getAccessToken(),r=await fetch("http://localhost:4000/v1/agency/profile/update",{method:"PUT",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify(S)});if(r.ok){if((await r.json()).success){w(e=>({...e,...S})),N(!1);let e=i.Z.getUserData(),r="",t="";try{let e=sessionStorage.getItem("at");if(e){let a=JSON.parse(window.atob(e));r=a.accessToken||"",t=a.refreshToken||""}}catch(e){}let a={id:null==e?void 0:e.id,name:"".concat(S.firstName," ").concat(S.lastName),email:S.email,phoneNumber:S.phoneNumber,category:null==e?void 0:e.category,accessToken:r,refreshToken:t};i.Z.setUserData(a),alert("Profile updated successfully!")}}else throw Error("Failed to update profile")}catch(e){console.error("Error updating profile:",e),alert("Failed to update profile. Please try again.")}},A=async()=>{if(j.newPassword!==j.confirmPassword)return void alert("New passwords do not match!");try{let e=i.Z.getAccessToken(),r=await fetch("http://localhost:4000/v1/agency/profile/change-password",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},body:JSON.stringify({currentPassword:j.currentPassword,newPassword:j.newPassword})});if(r.ok){let e=await r.json();e.success?(alert("Password updated successfully!"),k({currentPassword:"",newPassword:"",confirmPassword:""})):alert(e.message||"Failed to update password")}else throw Error("Failed to update password")}catch(e){console.error("Error updating password:",e),alert("Failed to update password. Please try again.")}},D=e=>{m(r=>({...r,[e]:!r[e]}))},T=[{id:"profile",label:"Profile",icon:(0,a.jsx)(l.JXP,{})},{id:"security",label:"Security",icon:(0,a.jsx)(l.F5$,{})},{id:"appearance",label:"Appearance",icon:(0,a.jsx)(l.hkc,{})},{id:"notifications",label:"Notifications",icon:(0,a.jsx)(l.zd,{})},{id:"privacy",label:"Privacy",icon:(0,a.jsx)(l.pcC,{})},{id:"payment",label:"Payment Methods",icon:(0,a.jsx)(l.lZI,{})},{id:"language",label:"Language",icon:(0,a.jsx)(l.VeH,{})},{id:"help",label:"Help & Support",icon:(0,a.jsx)(l.lrG,{})}];return(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 p-4 md:p-6",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden",children:(0,a.jsxs)("div",{className:"md:flex",children:[(0,a.jsxs)("div",{className:"md:w-64 md:border-r border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Settings"}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Manage your account preferences"})]}),(0,a.jsx)("nav",{className:"p-4",children:(0,a.jsx)("ul",{className:"space-y-2",children:T.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>o(e.id),className:"w-full flex items-center space-x-3 px-4 py-3 rounded-lg text-left transition ".concat(t===e.id?"bg-[#ff6600] text-white":"text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800"),children:[(0,a.jsx)("span",{className:"text-lg",children:e.icon}),(0,a.jsx)("span",{children:e.label})]})},e.id))})})]}),(0,a.jsx)("div",{className:"flex-1 p-6",children:(0,a.jsx)(n.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:(()=>{switch(t){case"profile":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Profile Information"}),(0,a.jsxs)("button",{onClick:()=>N(!p),className:"flex items-center gap-2 px-4 py-2 bg-[#ff6600] hover:bg-[#e65c00] text-white rounded-lg transition",children:[p?(0,a.jsx)(l.Bc_,{className:"w-4 h-4"}):(0,a.jsx)(l.SG1,{className:"w-4 h-4"}),p?"Save Changes":"Edit Profile"]})]}),!p&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.firstName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.lastName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.phoneNumber})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Agency Name"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.agencyName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Agency Code"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:v.agencyCode})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("active"===v.status?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"),children:v.status})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role"}),(0,a.jsx)("div",{className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white capitalize",children:v.role})]})]})]}),p&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"First Name"}),(0,a.jsx)("input",{type:"text",name:"firstName",value:S.firstName,onChange:O,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Last Name"}),(0,a.jsx)("input",{type:"text",name:"lastName",value:S.lastName,onChange:O,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",value:S.email,onChange:O,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",name:"phoneNumber",value:S.phoneNumber,onChange:O,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white"})]}),(0,a.jsxs)("div",{className:"md:col-span-2 flex gap-3",children:[(0,a.jsx)("button",{onClick:C,className:"bg-[#ff6600] hover:bg-[#e65c00] text-white px-6 py-2 rounded-lg transition",children:"Save Changes"}),(0,a.jsx)("button",{onClick:()=>N(!1),className:"bg-gray-500 hover:bg-gray-600 text-white px-6 py-2 rounded-lg transition",children:"Cancel"})]})]})]});case"security":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Change Password"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:u?"text":"password",name:"currentPassword",value:j.currentPassword,onChange:E,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white pr-10"}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",onClick:()=>x(!u),children:u?(0,a.jsx)(l._NO,{}):(0,a.jsx)(l.Vap,{})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:h?"text":"password",name:"newPassword",value:j.newPassword,onChange:E,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white pr-10"}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",onClick:()=>y(!h),children:h?(0,a.jsx)(l._NO,{}):(0,a.jsx)(l.Vap,{})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:b?"text":"password",name:"confirmPassword",value:j.confirmPassword,onChange:E,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-[#ff6600] focus:border-transparent dark:bg-gray-700 dark:text-white pr-10"}),(0,a.jsx)("button",{type:"button",className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",onClick:()=>f(!b),children:b?(0,a.jsx)(l._NO,{}):(0,a.jsx)(l.Vap,{})})]})]})]}),(0,a.jsx)("button",{onClick:A,className:"bg-[#ff6600] hover:bg-[#e65c00] text-white px-6 py-2 rounded-lg transition",children:"Update Password"}),(0,a.jsxs)("div",{className:"pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Two-Factor Authentication"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:"2FA is disabled"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Add an extra layer of security to your account"})]}),(0,a.jsx)("button",{className:"bg-[#ff6600] hover:bg-[#e65c00] text-white px-4 py-2 rounded-lg text-sm transition",children:"Enable"})]})]})]});case"appearance":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Appearance"}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[d?(0,a.jsx)(l.hkc,{className:"text-[#ff6600]"}):(0,a.jsx)(l.Wh$,{className:"text-[#ff6600]"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white",children:"Dark Mode"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d?"Dark theme is enabled":"Light theme is enabled"})]})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:d,onChange:()=>c(!d),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#ff6600]"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Font Size"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-3",children:["Small","Medium","Large"].map(e=>(0,a.jsx)("button",{className:"py-2 px-4 border border-gray-300 dark:border-gray-600 rounded-lg text-center hover:bg-gray-50 dark:hover:bg-gray-800 transition",children:e},e))})]})]});case"notifications":return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Notification Preferences"}),Object.entries(g).map(e=>{let[r,t]=e;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-medium text-gray-900 dark:text-white capitalize",children:[r," Notifications"]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:t?"Enabled":"Disabled"})]}),(0,a.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:()=>D(r),className:"sr-only peer"}),(0,a.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-[#ff6600]"})]})]},r)})]});default:return(0,a.jsx)("div",{children:"Select a settings category"})}})()},t)})]})})})}},74436:(e,r,t)=>{"use strict";t.d(r,{k5:()=>c});var a=t(12115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=a.createContext&&a.createContext(s),l=["attr","size","title"];function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,a)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach(function(r){var a,s,n;a=e,s=r,n=t[r],(s=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var a=t.call(e,r||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function c(e){return r=>a.createElement(g,i({attr:d({},e.attr)},r),function e(r){return r&&r.map((r,t)=>a.createElement(r.tag,d({key:t},r.attr),e(r.child)))}(e.child))}function g(e){var r=r=>{var t,{attr:s,size:n,title:o}=e,c=function(e,r){if(null==e)return{};var t,a,s=function(e,r){if(null==e)return{};var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(r.indexOf(a)>=0)continue;t[a]=e[a]}return t}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)t=n[a],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}(e,l),g=n||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),a.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,s,c,{className:t,style:d(d({color:e.color||r.color},r.style),e.style),height:g,width:g,xmlns:"http://www.w3.org/2000/svg"}),o&&a.createElement("title",null,o),e.children)};return void 0!==n?a.createElement(n.Consumer,null,e=>r(e)):r(s)}},91541:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>d,Z:()=>o});var a=t(95155),s=t(12115),n=t(35695);let l=(0,s.createContext)(void 0);class i{encrypt(e){try{return btoa(encodeURIComponent(e))}catch(e){throw Error("Encryption failed")}}decrypt(e){try{return decodeURIComponent(atob(e))}catch(e){throw this.clearUserData(),Error("Invalid token data")}}setUserData(e){try{let r={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+36e5},t=this.encrypt(JSON.stringify(r));sessionStorage.setItem(this.ACCESS_TOKEN_KEY,t);let{accessToken:a,refreshToken:s,...n}=e,l=this.encrypt(JSON.stringify(n));sessionStorage.setItem(this.USER_DATA_KEY,l)}catch(e){this.clearUserData()}}getUserData(){try{let e=sessionStorage.getItem(this.USER_DATA_KEY);if(!e)return null;return JSON.parse(this.decrypt(e))}catch(e){return this.clearUserData(),null}}getAccessToken(){try{let e=sessionStorage.getItem(this.ACCESS_TOKEN_KEY);if(!e)return null;let r=JSON.parse(this.decrypt(e));if(Date.now()>r.expiresAt)return this.clearUserData(),null;return r.accessToken}catch(e){return this.clearUserData(),null}}clearUserData(){sessionStorage.removeItem(this.ACCESS_TOKEN_KEY),sessionStorage.removeItem(this.USER_DATA_KEY)}isAuthenticated(){return!!this.getAccessToken()}constructor(){this.ACCESS_TOKEN_KEY="at",this.USER_DATA_KEY="ud"}}let o=new i;function d(e){let{children:r}=e,[t,i]=(0,s.useState)(null),[d,c]=(0,s.useState)(!0),g=(0,n.useRouter)();(0,s.useEffect)(()=>{setTimeout(()=>{try{let e=o.getUserData();o.isAuthenticated()&&e?i(e):(o.clearUserData(),i(null))}catch(e){o.clearUserData(),i(null)}finally{c(!1)}},100)},[]);let m={user:t,isLoading:d,isAuthenticated:!!t&&o.isAuthenticated(),login:e=>{o.setUserData(e),i(e)},logout:()=>{o.clearUserData(),i(null),g.push("/login")}};return(0,a.jsx)(l.Provider,{value:m,children:r})}function c(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[844,5430,8441,1317,7358],()=>r(48163)),_N_E=e.O()}]);
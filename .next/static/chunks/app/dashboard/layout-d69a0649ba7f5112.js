(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1954],{60273:(e,t,a)=>{Promise.resolve().then(a.bind(a,70388))},70388:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var s=a(95155),r=a(12115),n=a(6874),i=a.n(n),l=a(35695),d=a(55430),o=a(60760),c=a(57340),x=a(39785),h=a(81586),m=a(40235),g=a(381),u=a(75525),p=a(74783),f=a(34835),b=a(54416),y=a(23861),v=a(79772),j=a(91541);let N=[{label:"Home",href:"/dashboard",icon:c.A},{label:"Check Balance",href:"/dashboard/balance",icon:x.A},{label:"Transactions",href:"/dashboard/transactions",icon:h.A},{label:"Commissions",href:"/dashboard/commission",icon:m.A},{label:"Settings",href:"/dashboard/settings",icon:g.A}];function k(e){let{href:t,label:a,icon:r,isActive:n,isExpanded:l,onClick:d}=e;return(0,s.jsxs)(i(),{href:t,title:l?"":a,onClick:d,className:"flex items-center gap-3 px-3 py-3 rounded-xl transition-all duration-200 group relative ".concat(n?"bg-[#ff6600] text-white shadow-lg":"text-gray-700 dark:text-gray-300 hover:bg-[#ff660020] dark:hover:bg-[#ff660020] hover:scale-105"),children:[(0,s.jsx)(r,{size:20,className:"flex-shrink-0"}),l&&(0,s.jsx)("span",{className:"whitespace-nowrap text-sm font-medium",children:a}),!l&&(0,s.jsx)("span",{className:"absolute left-full ml-2 px-3 py-2 bg-gray-800 text-white text-sm rounded-lg shadow-lg z-50 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none",children:a})]})}function w(e){var t;let{children:a}=e,n=(0,l.usePathname)(),c=(0,l.useRouter)(),{user:x,isLoading:h,isAuthenticated:m,logout:g}=(0,j.A)(),[w,A]=(0,r.useState)(!1),[E,S]=(0,r.useState)(!1),[C,_]=(0,r.useState)(!1),[U,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!h&&!m){let e="/login?redirect="+encodeURIComponent(n);c.push(e)}},[h,m,n,c]),(0,r.useEffect)(()=>{let e=()=>{z(window.innerWidth<768),window.innerWidth>=768&&_(!1)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{let e=e=>{E&&S(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[E]);let D=()=>{g()},T=()=>{U?_(!C):A(!w)},P=()=>{_(!1)};return h?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-950",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)(d.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mx-auto w-12 h-12 border-4 border-[#ff6600] border-t-transparent rounded-full mb-4"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Loading dashboard..."})]})}):m&&x?(0,s.jsxs)("div",{className:"min-h-screen flex bg-gray-50 dark:bg-gray-950 text-gray-900 dark:text-white transition-colors duration-300",children:[(0,s.jsxs)("div",{className:"fixed top-4 left-4 z-50 flex items-center gap-2 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 px-3 py-1 rounded-full text-xs border border-green-200 dark:border-green-800",children:[(0,s.jsx)(u.A,{className:"w-3 h-3"}),"Secure Session"]}),(0,s.jsxs)(d.P.aside,{animate:{width:w?240:80},transition:{duration:.3,type:"spring",damping:25},className:"hidden md:flex h-screen bg-white dark:bg-gray-900 shadow-lg py-6 px-4 flex-col sticky top-0 z-40",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full mb-8",children:[w?(0,s.jsxs)("h1",{className:"text-xl font-extrabold tracking-tight",children:[(0,s.jsx)("span",{className:"text-[#ff6600]",children:"X"}),(0,s.jsx)("span",{className:"text-[#13294b] dark:text-white",children:"-Pay"})]}):(0,s.jsx)("h1",{className:"text-xl font-extrabold tracking-tight text-[#ff6600]",children:"X"}),(0,s.jsx)("button",{onClick:T,className:"ml-auto p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":w?"Collapse sidebar":"Expand sidebar",children:(0,s.jsx)(p.A,{size:18})})]}),w&&x&&(0,s.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:x.name}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:x.category}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:x.phoneNumber})]}),(0,s.jsx)("nav",{className:"flex flex-col gap-2 w-full flex-1",children:N.map(e=>(0,s.jsx)(k,{...e,isActive:n===e.href,isExpanded:w},e.href))}),(0,s.jsxs)("button",{onClick:D,className:"flex items-center gap-3 px-3 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 transition-all mt-auto","aria-label":"Logout",children:[(0,s.jsx)(f.A,{size:20}),w&&(0,s.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})]}),(0,s.jsx)(o.N,{children:C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-40 md:hidden",onClick:P}),(0,s.jsxs)(d.P.aside,{initial:{x:-300},animate:{x:0},exit:{x:-300},transition:{type:"spring",damping:25},className:"fixed left-0 top-0 h-screen w-64 bg-white dark:bg-gray-900 shadow-2xl py-6 px-4 flex flex-col z-50 md:hidden",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full mb-8",children:[(0,s.jsxs)("h1",{className:"text-xl font-extrabold tracking-tight",children:[(0,s.jsx)("span",{className:"text-[#ff6600]",children:"X"}),(0,s.jsx)("span",{className:"text-[#13294b] dark:text-white",children:"-Pay"})]}),(0,s.jsx)("button",{onClick:P,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"Close menu",children:(0,s.jsx)(b.A,{size:20})})]}),x&&(0,s.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[x.category," • ",x.phoneNumber]})]}),(0,s.jsx)("nav",{className:"flex flex-col gap-2 w-full flex-1",children:N.map(e=>(0,s.jsx)(k,{...e,isActive:n===e.href,isExpanded:!0,onClick:P},e.href))}),(0,s.jsxs)("button",{onClick:D,className:"flex items-center gap-3 px-3 py-3 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 transition-all mt-auto",children:[(0,s.jsx)(f.A,{size:20}),(0,s.jsx)("span",{className:"text-sm font-medium",children:"Logout"})]})]})]})}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-screen md:min-h-0",children:[(0,s.jsxs)("header",{className:"px-4 sm:px-6 py-3 bg-white dark:bg-gray-900 shadow-sm flex justify-between items-center z-30 sticky top-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:T,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 md:hidden","aria-label":"Open menu",children:(0,s.jsx)(p.A,{size:20})}),(0,s.jsx)("h1",{className:"text-lg sm:text-xl font-semibold truncate",children:(null==(t=N.find(e=>e.href===n))?void 0:t.label)||"Dashboard"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-6",children:[(0,s.jsxs)("div",{className:"relative cursor-pointer p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,s.jsx)(y.A,{size:20}),(0,s.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-600 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center",children:"3"})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("button",{onClick:()=>S(e=>!e),className:"flex items-center gap-2 p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800","aria-label":"User menu",children:[(0,s.jsx)(v.A,{size:32,className:"text-gray-700 dark:text-white"}),(0,s.jsx)("span",{className:"hidden sm:block text-sm font-medium",children:null==x?void 0:x.name.split(" ")[0]})]}),(0,s.jsx)(o.N,{children:E&&(0,s.jsxs)(d.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 shadow-lg rounded-lg py-2 z-50 border border-gray-200 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:null==x?void 0:x.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[null==x?void 0:x.category," • ",null==x?void 0:x.phoneNumber]})]}),(0,s.jsx)(i(),{href:"/dashboard/settings",className:"block px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>S(!1),children:"Settings"}),(0,s.jsxs)("button",{className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2 text-red-600 dark:text-red-400",onClick:D,children:[(0,s.jsx)(f.A,{size:16})," Logout"]})]})})]})]})]}),(0,s.jsxs)("main",{className:"flex-1 relative p-4 sm:p-6 md:p-8 overflow-y-auto overflow-x-hidden",children:[(0,s.jsxs)("div",{className:"fixed inset-0 overflow-hidden pointer-events-none z-0",children:[(0,s.jsx)(d.P.div,{className:"absolute w-48 h-48 bg-[#ff660020] rounded-full blur-2xl top-10 left-1/4",animate:{y:[0,10,-10,0]},transition:{duration:15,repeat:1/0,ease:"easeInOut"}}),(0,s.jsx)(d.P.div,{className:"absolute w-40 h-40 bg-blue-400/20 dark:bg-blue-900/20 rounded-full blur-xl bottom-5 right-1/4",animate:{x:[0,-8,8,0]},transition:{duration:12,repeat:1/0,ease:"easeInOut"}})]}),(0,s.jsx)("div",{className:"relative z-10 w-full max-w-full",children:a})]})]})]}):null}},91541:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,AuthProvider:()=>o,Z:()=>d});var s=a(95155),r=a(12115),n=a(35695);let i=(0,r.createContext)(void 0);class l{encrypt(e){try{return btoa(encodeURIComponent(e))}catch(e){throw Error("Encryption failed")}}decrypt(e){try{return decodeURIComponent(atob(e))}catch(e){throw this.clearUserData(),Error("Invalid token data")}}setUserData(e){try{let t={accessToken:e.accessToken,refreshToken:e.refreshToken,expiresAt:Date.now()+36e5},a=this.encrypt(JSON.stringify(t));sessionStorage.setItem(this.ACCESS_TOKEN_KEY,a);let{accessToken:s,refreshToken:r,...n}=e,i=this.encrypt(JSON.stringify(n));sessionStorage.setItem(this.USER_DATA_KEY,i)}catch(e){this.clearUserData()}}getUserData(){try{let e=sessionStorage.getItem(this.USER_DATA_KEY);if(!e)return null;return JSON.parse(this.decrypt(e))}catch(e){return this.clearUserData(),null}}getAccessToken(){try{let e=sessionStorage.getItem(this.ACCESS_TOKEN_KEY);if(!e)return null;let t=JSON.parse(this.decrypt(e));if(Date.now()>t.expiresAt)return this.clearUserData(),null;return t.accessToken}catch(e){return this.clearUserData(),null}}clearUserData(){sessionStorage.removeItem(this.ACCESS_TOKEN_KEY),sessionStorage.removeItem(this.USER_DATA_KEY)}isAuthenticated(){return!!this.getAccessToken()}constructor(){this.ACCESS_TOKEN_KEY="at",this.USER_DATA_KEY="ud"}}let d=new l;function o(e){let{children:t}=e,[a,l]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0),x=(0,n.useRouter)();(0,r.useEffect)(()=>{setTimeout(()=>{try{let e=d.getUserData();d.isAuthenticated()&&e?l(e):(d.clearUserData(),l(null))}catch(e){d.clearUserData(),l(null)}finally{c(!1)}},100)},[]);let h={user:a,isLoading:o,isAuthenticated:!!a&&d.isAuthenticated(),login:e=>{d.setUserData(e),l(e)},logout:()=>{d.clearUserData(),l(null),x.push("/login")}};return(0,s.jsx)(i.Provider,{value:h,children:t})}function c(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[5430,6874,7248,8441,1317,7358],()=>t(60273)),_N_E=e.O()}]);